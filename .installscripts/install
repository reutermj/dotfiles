#!/bin/bash
sudo apt-get update
sudo apt-get upgrade
sudo apt-get -y install wget gnupg gnupg2 curl

echo "updating to sid/experimental"
sudo rm /etc/apt/sources.list
sudo cp /home/mark/.installscripts/sources.list /etc/apt/sources.list

curl -sS https://download.spotify.com/debian/pubkey_0D811D58.gpg | sudo apt-key add - 
echo "deb http://repository.spotify.com stable non-free" | sudo tee /etc/apt/sources.list.d/spotify.list

sudo dpkg --add-architecture i386
sudo apt-get update && sudo apt-get -y dist-upgrade && sudo apt-get -y autoremove --purge

sudo apt-get -y install xorg i3-wm nvidia-driver steam pulseaudio rxvt-unicode dmenu feh compton pavucontrol vlc wine64 firefox cups

sudo apt-get update
sudo apt-get -y install spotify-client

sudo apt-get update --fix-missing
sudo apt-get -y install spotify-client

sudo dpkg -i /home/mark/.installscripts/discord.deb
sudo apt-get -y install --fix-broken

sudo apt-get -y autoremove --purge
sudo apt-get -y autoclean

sudo dpkg -i /home/mark/.installscripts/hll2320dlpr-3.2.0-1.i386.deb /home/mark/.installscripts/hll2320dcupswrapper-3.2.0-1.i386.deb

echo "Adding sudoers"
cat /home/mark/.installscripts/visudo_append | (sudo su -c 'EDITOR="tee" visudo -f /etc/sudoers.d/mysudoers')

echo "Adding my other hard drives"

mkdir -p /home/mark/.steam/steam/
mkdir /home/mark/.data/
mkdir /home/mark/.games/

/home/mark/.rootscripts/mountdrives

ln -s /home/mark/.data/videos/movies/ /home/mark/movies
ln -s /home/mark/.data/videos/tvshows/ /home/mark/tvshows
ln -s /home/mark/.data/music/ /home/mark/music
ln -s /home/mark/.games/steamapps/ /home/mark/.steam/steam/steamapps
ln -s /home/mark/.games/compatibilitytools.d/ /home/mark/.steam/compatibilitytools.d

echo "Changing ownership of created files"
sudo chown -R mark:mark /home/mark/.steam/
sudo chown -R mark:mark /home/mark/music
sudo chown -R mark:mark /home/mark/movies
sudo chown -R mark:mark /home/mark/tvshows
sudo chown -R mark:mark /home/mark/.data
sudo chown -R mark:mark /home/mark/.games

echo "Please restart computer"

